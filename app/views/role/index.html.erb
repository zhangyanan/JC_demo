<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
  <title>角色列表</title>
</head>
<script type="text/javascript">
    $(function () {
        <% unless @page_info[:current] == 1%>
        $(".page_first").click(function () {
            location.href = "<%= url_for params.merge(:page => 1)%>"
        });
        $(".page_prev").click(function () {
            location.href = "<%= url_for params.merge(:page => @page_info[:current] - 1)%>"
        });
        <% end %>
        <% unless @page_info[:current] == @page_info[:count] %>
        $(".page_last").click(function () {
            location.href = "<%= url_for params.merge(:page => @page_info[:count])%>"
        });
        $(".page_next").click(function () {
            location.href = "<%= url_for params.merge(:page => @page_info[:current] + 1)%>"
        });
        <% end %>
        <% if @page_info[:count] > 1 %>
        $(".page_go").click(function () {
            if ($('#paginate').val() <=<%=@page_info[:count]%>)
                    <% urls = url_for(params.merge(:page => 1)).split("?") %>
                location.href = "<%= (urls[0].split("/")[0..-2].join("/") + "/").html_safe %>" + $('#paginate').val() + "<%= ("?" + urls[1]).html_safe if urls[1] %>"
        });
        <% end %>
    })
</script>
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
  <td height="27"><table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td width="3" height="27"><%= image_tag("main_42.gif",width:'3',height:'27') %></td>
      <td background="<%= asset_path 'main_43.gif' %>">
        <table width="100%" height="21" border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td style="padding-left:5px; font-size:9pt;"><table border="0" cellspacing="0" cellpadding="0">
            <tr>
              <td width="3%"><div align="center"><%= image_tag("right01.gif",width:'14',height:'14') %></div></td>
              <td width="97%" style="font-size:12px; padding-left:10px;" nowrap="nowrap"><%= @title %> </td>
            </tr>
          </table></td>
          <td width="265px" >
            <%= form_tag({:controller => :role,:action => :query},:name => 'searchForm',:id => 'searchForm')  do%>
            <span style="font-size: 12px;">角色名称:<%= text_field_tag :name,'',:class => 'input_search' %></span>
            <table width="50px" border="0" align="right" cellpadding="0" cellspacing="0" style="text-align: center">
            <tr>
              <td width="3px" height="21"><%= image_tag("main_46.gif",width:'3',height:'21') %></td>
              <td background="<%= asset_path 'main_48.gif' %>"><table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr>
                  <td>
                    <table width="100%"  border="0" cellspacing="0" cellpadding="0">
                    <tr>
                      <td><div align="center"><%= image_tag("src.gif",width:'15',height:'13') %></div></td>
                      <td><div align="center"><span class="STYLE1" onclick="searchForm.submit()">查找</span></div></td>
                    </tr>
                  </table>
                  </td>
                </tr>
              </table>
              </td>
              <td width="3"><%= image_tag("main_51.gif",width:'3',height:'21') %></td>
            </tr>
          </table>
          <% end %>
          </td>
        </tr>
      </table></td>
      <td width="3"><%= image_tag("main_44.gif") %></td>
    </tr>
  </table></td>
</tr>


<tr>
  <td valign="top" bgcolor="#FFFFFF" style="border-left:solid 1px #7a99c2; border-bottom:solid 1px #7a99c2; border-right:solid 1px #7a99c2; padding-top:2px; padding-left:3px; padding-right:3px;"><table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td>
        <table class="simpleTable">
        <tr>
          <th  class="tab_firstline">编号</th>
          <th class="tab_firstline">名称</th>
          <th class="tab_firstline">描述</th>
          <th class="tab_firstline">状态</th>
          <th class="tab_firstline">创建时间</th>
          <th class="tab_firstline">更新时间</th>
          <th class="tab_firstline">操作</th>
        </tr>
        <% @roles.each do |role| %>
        <tr>
          <td class="td1"><%= list_index %></td>
          <td class="td1"><%= role.name %></td>
          <td class="td1"><%= role.description %></td>
          <td class="td1"><%= role.state_text %></td>
          <td class="td1"><%= format_datetime role.created_at %></td>
          <td class="td1"><%= format_datetime role.updated_at %></td>
          <td class="td1">
            <% if role.state.to_i == Role::ENABLED  %>
                <%= link_to  '[禁用]',:action => :disable,:id => role.id %>&nbsp;&nbsp;&nbsp;&nbsp;
            <%else%>
                <%= link_to  '[启用]',:action => :enable,:id => role.id %>&nbsp;&nbsp;&nbsp;&nbsp;
            <% end %>
            <%= link_to  '[新增]',:action => :new,:id => role.id %>&nbsp;&nbsp;&nbsp;&nbsp;
            <%= link_to '[编辑]',:action => :edit,:id => role.id %>&nbsp;&nbsp;&nbsp;&nbsp;
            <%= link_to  '[删除]',:action => :delete ,:id => role.id %> </td>
        </tr>
        <% end %>
      </table>
      </td>
    </tr>
  </table></td>
</tr>
</table>
<div style="float:right;"><%= show_paginate  %></div>
</body>
</html>
